/** * @author k */import flash.display.BitmapData;import flash.geom.*;import com.bourre.commands.Delegate; import com.continuityny.courtyard.views.home.HomeData;import com.continuityny.courtyard.views.home.SlicedPanel;import com.continuityny.courtyard.views.home.HomeSliced;import com.continuityny.courtyard.views.home.HomeThumb;class com.continuityny.courtyard.views.home.HomeView extends MovieClip {		private var homeData:HomeData;		private var bandHolder:MovieClip;	private var thumbHolder:MovieClip;	private var sliceHolder:MovieClip;		private var OnRevealFinished:Function;	private var OnImagesLoaded:Function;		public var imageHolder:MovieClip;		private var allThumbs:Array=new Array();			public function HomeView(container,onRevealComplete,onImagesLoaded) {		trace('HomeView');						OnRevealFinished = onRevealComplete;		OnImagesLoaded = onImagesLoaded;				container.__proto__ = this.__proto__;		container.__constructor__ = HomeView;		this = container;							_global.HomeMuthaFuckinShell= this;						homeData=HomeData.getInstance();		homeData.setShell(this);		// i kno this isn't declared anywhere else				init();	}	public function changeSections(id:String):Void{		trace("changesection id:"+id);		//hideSlices(currentSectionNum);		if(id!='home'){			for(var i=0;i<homeData.sections.length;i++){				if(id==homeData.sections[i]){					showSlices(i-1);				}else{					hideSlices(i-1)					}			}		}else{			startMotion();			for(var j=0;j<homeData.sections.length;j++){				hideSlices(j);			}		}	}		private function showSlices(i : Number) : Void {		this['neutral'+i].revealPage();	}	private function hideSlices(i : Number) : Void {		this['neutral'+i].hidePage();	}		private function init():Void{		homeData.loadImages();	}		public function imagesLoaded():Void{		build();	}	private function build():Void{		this.bandHolder = this.createEmptyMovieClip("bandHolder", 3);		this.thumbHolder = this.createEmptyMovieClip("thumbHolder", 2);		this.sliceHolder = this.createEmptyMovieClip("sliceHolder", 1);					for(var i=0;i< homeData.sections.length; i++){			trace(homeData.sections[i])			var neutral_bmp:BitmapData = homeData.bitmaps[i+6];			var slice_mc:SlicedPanel=new HomeSliced(this.createEmptyMovieClip("neutral"+i, 100+i),neutral_bmp,this);			var thumb_mc : HomeThumb = new HomeThumb(this.thumbHolder.createEmptyMovieClip("thumb"+i, (50+i)),homeData.bitmaps[i-1],homeData.sections[i			]);				thumb_mc.id = i;			allThumbs.push(thumb_mc);			trace(thumb_mc);		}		OnImagesLoaded();			}		private function startMotion(){		trace("startMotion");		for(var j=0;j<homeData.sections.length;j++){			var targ:HomeThumb = this.thumbHolder["thumb"+j];			targ.startMotion();			targ.enable();				}	}	private function stopMotion(){		trace("stopMotion");		for(var j=0;j<homeData.sections.length;j++){		//	trace(this.thumbHolder["thumb"+j])			var targ:HomeThumb = this.thumbHolder["thumb"+j];			targ.startMotion();			targ.disable();				}	}	private function revealNeutralComplete(){		stopMotion();		OnRevealFinished()		}	public function finito(){		trace('finito!');		stopMotion();		OnRevealFinished()	}	public function putMeOnTop(targ:HomeThumb){		targ.swapDepths(thumbHolder.getNextHighestDepth());	}	public function putMeBack(targ:HomeThumb){		targ.swapDepths(targ.currentDepth);	}}