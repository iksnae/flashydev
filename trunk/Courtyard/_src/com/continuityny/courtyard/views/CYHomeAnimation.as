/** * @author k */import flash.display.BitmapData;class com.continuityny.courtyard.views.CYHomeAnimation extends MovieClip {			private var idle:Boolean;	private var currentNum:Number=0;	private var sections:Array = new Array(											'LOBBY',											'MARKET',											'ROOM',											'FITNESS',											'BUSINESS',											'OUTDOOR'	);		private var imageURLS:Array=new Array();	private var bitmaps:Array=new Array();	private var colors:Array= new Array(0xB0CF61,0x5F8437);	private var defaultImageURLS:Array= new Array(											'images/lobby_1.png',											'images/lobby_2.png',											'images/lobby_3.png',																						'images/pool_1.png',											'images/pool_2.png',											'images/pool_3.png',																						'images/market_1.png',											'images/market_2.png',											'images/market_3.png',																						'images/room_1.png',											'images/room_2.png',																						'images/biz_1.png',											'images/biz_2.png'											);												private var imageOutter:MovieClip;	private var imageInner:MovieClip;	private var imageHolder:MovieClip;	private var imageLoader:MovieClipLoader					public function CYHomeAnimation(container,images:Array) {		trace('======================================================');		trace('Home Animation Loaded.');		/*		 * 		 */		container.__proto__ = this.__proto__;		container.__constructor__ = CYHomeAnimation;		this = container;				if(images){			imageURLS=images;			trace(' - image urls were supplied. thank you.');		}else{			imageURLS = defaultImageURLS;			trace(' - no image urls were supplied. defaults will be used.');		}		trace('======================================================\r');		init();			}	public function changSection(targ:String):Void{		trace('change section to:'+targ);		switch(targ){			case sections[0]:			break;			case sections[1]:			break;			case sections[2]:			break;			case sections[3]:			break;			case sections[4]:			break;		}	}		private function init():Void{		loadImages();	}		/*	 *  image loading and bitmap parsing methods....	 */		private function loadImages():Void{		trace('loading images...\r')		imageLoader = new MovieClipLoader();		imageLoader.addListener(this);		loadNextImage();		}	private function loadNextImage():Void{		imageHolder = createEmptyMovieClip('imageOutter', 0);		imageLoader.loadClip(imageURLS[currentNum],imageHolder);		trace('loading image: '+imageURLS[currentNum])		currentNum++;	}	private function onLoadInit():Void{		trace(' - image loaded.')		var bmp:BitmapData=new BitmapData(imageHolder._width, imageHolder._height, true, 0x00000000);		bmp.draw(imageHolder);		bitmaps.push(bmp);		trace(' - bitmap data stored: '+bmp);		if(currentNum<imageURLS.length){			trace(' - keep loading...')			loadNextImage();		}else{			trace('all images loaded.')				//trace(bitmaps);			delete imageLoader;			imageHolder.removeMovieClip();			build();		}	}	/*	 *  UI building methods	 */	 private function build():Void{	 	trace('======================================================');		trace('building UI');		buildLobbySection();			 }	 private function buildLobbySection():Void{	 		 		 	var obj0:Object = {bmp:bitmaps[1],width:150,defaultX:0,offset:0};	 	var obj1:Object = {bmp:bitmaps[1],width:100,defaultX:150,offset:150};	 	var obj2:Object = {bmp:bitmaps[2],width:60,defaultX:250,offset:0};	 	var obj3:Object = {bmp:bitmaps[0],width:50,defaultX:310,offset:0};	 	var obj4:Object = {bmp:bitmaps[0],width:150,defaultX:360,offset:50};	 	var obj5:Object = {bmp:bitmaps[0],width:120,defaultX:510,offset:200};	 	var obj6:Object = {bmp:bitmaps[0],width:200,defaultX:630,offset:320};	 	var obj7:Object = {bmp:bitmaps[0],width:60,defaultX:830,offset:520};	 		 	var obj8:Object = {color:colors[0],width:60,defaultX:0};	 	var obj9:Object = {color:colors[0],width:3,defaultX:250};	 		 		 	newPane('lobby0',obj0);	 	newPane('lobby1',obj1);	 	newPane('lobby2',obj2);	 	newPane('lobby3',obj3);	 	newPane('lobby4',obj4);	 	newPane('lobby5',obj5);	 	newPane('lobby6',obj6);	 	newPane('lobby7',obj7);	 		 	newColorPane('lobby8',obj8)	 	newColorPane('lobby9',obj9)	 		 	buildFitnessSection();	 }	 	 private function buildFitnessSection():Void{	 		 	var obj0:Object = {bmp:bitmaps[4],width:55,defaultX:0,offset:0};	 	var obj1:Object = {bmp:bitmaps[5],width:69,defaultX:55,offset:0};	 	var obj2:Object = {bmp:bitmaps[3],width:110,defaultX:124,offset:55};	 	var obj3:Object = {bmp:bitmaps[3],width:60,defaultX:234,offset:165};	 	var obj4:Object = {bmp:bitmaps[3],width:150,defaultX:294,offset:225};	 	var obj5:Object = {bmp:bitmaps[3],width:120,defaultX:444,offset:375};	 	var obj6:Object = {bmp:bitmaps[3],width:200,defaultX:564,offset:495};	 	var obj7:Object = {bmp:bitmaps[3],width:85,defaultX:764,offset:695};	 		 	newPane('fitness0',obj0);	 	newPane('fitness1',obj1);	 	newPane('fitness2',obj2);	 	newPane('fitness3',obj3);	 	newPane('fitness4',obj4);	 	newPane('fitness5',obj5);	 	newPane('fitness6',obj6);	 	newPane('fitness7',obj7);	 		 	buildMarketSeciton();	 }	 	 private function buildMarketSeciton():Void{	 	var obj0:Object = {color:colors[0],width:30,defaultX:0};	 	var obj1:Object = {bmp:bitmaps[8],width:59,defaultX:30,offset:0};	 	var obj2:Object = {bmp:bitmaps[7],width:150,defaultX:89,offset:35};	 	var obj3:Object = {bmp:bitmaps[7],width:210,defaultX:235,offset:180};	 	var obj4:Object = {bmp:bitmaps[6],width:120,defaultX:445,offset:102};	 	var obj5:Object = {bmp:bitmaps[6],width:50,defaultX:565,offset:222};	 	var obj6:Object = {bmp:bitmaps[6],width:200,defaultX:614,offset:272};	 	var obj7:Object = {bmp:bitmaps[6],width:105,defaultX:814,offset:472};	 		 	newColorPane('market0',obj0);	 	newPane('market1',obj1);	 	newPane('market2',obj2);	 	newPane('market3',obj3);	 	newPane('market4',obj4);	 	newPane('market5',obj5);	 	newPane('market6',obj6);	 	newPane('market7',obj7);	 		 	buildRoomSection();	 	 }	 private function buildRoomSection():Void{	 	var obj0:Object = {color:colors[0],width:6,defaultX:0};	 	var obj1:Object = {bmp:bitmaps[10],width:80,defaultX:6,offset:0};	 	var obj2:Object = {bmp:bitmaps[10],width:60,defaultX:86,offset:80};	 	var obj3:Object = {color:colors[0],width:5,defaultX:146};	 	var obj4:Object = {color:colors[1],width:28,defaultX:151};	 	var obj5:Object = {color:colors[0],width:7,defaultX:179};	 	 	var obj6:Object = {bmp:bitmaps[9],width:100,defaultX:186,offset:0};	 	var obj7:Object = {bmp:bitmaps[9],width:150,defaultX:286,offset:100};	 	var obj8:Object = {bmp:bitmaps[9],width:50,defaultX:336,offset:150};	 	var obj9:Object = {bmp:bitmaps[9],width:120,defaultX:386,offset:200};	 	var obj10:Object = {bmp:bitmaps[9],width:200,defaultX:506,offset:320};	 		 	var obj11:Object = {bmp:bitmaps[9],width:50,defaultX:706,offset:520};	 	var obj12:Object = {bmp:bitmaps[9],width:102,defaultX:756,offset:570};	 		 	newColorPane('room0',obj0);	 	newPane('room1',obj1);	 	newPane('room2',obj2);	 	newColorPane('room3',obj3);	 	newColorPane('room4',obj4);	 	newColorPane('room5',obj5);	 		 	newPane('room6',obj6);	 	newPane('room7',obj7);	 	newPane('room8',obj8);	 	newPane('room9',obj9);	 	newPane('room10',obj10);	 	newPane('room11',obj11);	 	newPane('room12',obj12);	 		 		 }	 	 private function newPane(id:String,settings:Object):Void{	 		var pane:MovieClip = this.createEmptyMovieClip(id, this.getNextHighestDepth());	 			 		var paneMask:MovieClip= pane.createEmptyMovieClip('mask', 0);	 		var paneImage:MovieClip= pane.createEmptyMovieClip('img', 1);	 			 			 			 		with (paneMask) {				beginFill(Math.round( Math.random()*0xFFFFFF),30);				moveTo(0,0);				lineTo(settings.width,0);				lineTo(settings.width,400);				lineTo(0,400);				endFill();	 		}	 		with (paneImage) {				beginBitmapFill(settings.bmp,new Matrix(),false,true);				moveTo(0,0);				lineTo(800,0);				lineTo(800,400);				lineTo(0,400);				endFill();	 		}			pane.defX =settings.defaultX;	 		pane._x = pane.defX;	 		paneImage._x=0-settings.offset;	 			 		trace(pane)	 		paneImage.setMask(paneMask)	 			 }	 private function newColorPane(id,settings:Object){	 		 	var pane:MovieClip = this.createEmptyMovieClip(id, this.getNextHighestDepth());	 		 	with (pane) {				beginFill(settings.color,100);				moveTo(0,0);				lineTo(settings.width,0);				lineTo(settings.width,400);				lineTo(0,400);				endFill();	 	}	 		 		 	pane.defX =settings.defaultX;	 	pane._x = pane.defX;	 	trace(pane);	 }}